'''
Check for a star being deleted
Sam Geen, January 2018
'''

from startup import *

f = open("../plots/deletelog.txt","w")

def runforsim(simname):
    sim = hamusims[simname]
    # Get first deletion time
    folder = sim.Folder()
    log = folder+"/LOG"
    logtxt = open(log,"r").read()
    firstdel = logtxt[:logtxt.find("DELETE")]
    time = firstdel[firstdel.rfind(" t= "):]
    time = time[:time.find("dt")]
    t = float(time[time.find("t=")+2:])
    snap = sim.FindAtTime(t,forceBefore=True)
    nl = "\n"
    f.write( simname +nl)
    f.write("First stellar deletion at "+str(t)+nl)
    f.write( "Last snapshot before first stellar deletion: "+str(snap.OutputNumber()) +nl )
    f.write("---"+nl)

def run(simnames,plotname):
    for simname in simnames:
        runforsim(simname)

if __name__=="__main__":
    run(imfsims,"imf")
    run(icsims,"ic")
    f.close()
